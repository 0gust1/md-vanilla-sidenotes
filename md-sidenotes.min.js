var processFootNotesToSideNotes=function(e){"use strict";var t=e.rootSel+" "+e.footNotesContainerSel+" "+e.footNotesSel,o=document.querySelectorAll(t),n=[],r=1;return Array.prototype.forEach.call(o,function(t){var o=document.createElement("aside"),a=t.id.replace(e.footNoteIdPattern,"");o.classList.add("sidenote"),o.setAttribute("data-ref",r),Array.prototype.forEach.call(t.childNodes,function(e){o.appendChild(e.cloneNode(!0))});var i={};i.id=a,i.node=o,i.num=r,n.push(i),r++}),n},initialize=function(e){"use strict";function t(e,t){e.matches&&(console.log("large !"),r(t))}function o(e,t){e.matches&&(console.log("medium !"),a(t))}var n=e||{rootSel:".wrapper",footNotesContainerSel:".footnotes",footNotesSel:"ol li",footNoteIdPattern:"fn:",footNoteAnchorPattern:"fnref:",sideNoteClass:"sidenote",largeMediaQuery:"(min-width: 800px)",mediumMediaQuery:"(max-width: 800px)",smallMediaQuery:""},r=function(e){e.forEach(function(e){var t=document.getElementById(n.footNoteAnchorPattern+e.id),o=t.parentElement.parentElement;o.insertBefore(e.node,t.parentElement)})},a=function(e){e.forEach(function(e){var t=document.getElementById(n.footNoteAnchorPattern+e.id),o=t.parentElement.parentElement;o.insertBefore(e.node,t.parentElement.nextSibling)})},i=processFootNotesToSideNotes(n);console.dir(i);var d=window.matchMedia(n.largeMediaQuery);d.addListener(function(e){t(e,i)}),d.matches?r(i):a(i);var c=window.matchMedia(n.mediumMediaQuery);c.addListener(function(e){o(e,i)})};