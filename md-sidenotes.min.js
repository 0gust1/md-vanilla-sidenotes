var processFootNotesToSideNotes=function(e){"use strict";var t=e.rootSel+" "+e.footNotesContainerSel+" "+e.footNotesSel,o=document.querySelectorAll(t),n=[],r=1;return Array.prototype.forEach.call(o,function(e){var t=document.createElement("aside"),o=e.id.replace(footNoteIdPattern,"");t.classList.add("sidenote"),t.setAttribute("data-ref",r),Array.prototype.forEach.call(e.childNodes,function(e){t.appendChild(e.cloneNode(!0))});var a={};a.id=o,a.node=t,a.num=r,n.push(a),r++}),n},initialize=function(e){"use strict";function t(e,t){e.matches&&(console.log("large !"),d(t))}function o(e,t){e.matches&&(console.log("medium !"),c(t))}var n=e||{rootSel:".wrapper",footNotesContainerSel:".footnotes",footNotesSel:"ol li",footNoteIdPattern:"fn:",footNoteAnchorPattern:"fnref:",sideNoteClass:"sidenote",largeMediaQuery:"(min-width: 800px)",mediumMediaQuery:"(max-width: 800px)",smallMediaQuery:""},r=processFootNotesToSideNotes(n);console.dir(r);var a=window.matchMedia(n.largeMediaQuery);a.addListener(function(e){t(e,r)});var i=window.matchMedia(n.mediumMediaQuery);i.addListener(function(e){o(e,r)});var d=function(e){e.forEach(function(e){var t=document.getElementById(footNoteAnchorPattern+e.id),o=t.parentElement.parentElement;o.insertBefore(e.node,t.parentElement)})},c=function(e){e.forEach(function(e){var t=document.getElementById(footNoteAnchorPattern+e.id),o=t.parentElement.parentElement;o.insertBefore(e.node,t.parentElement.nextSibling)})}};